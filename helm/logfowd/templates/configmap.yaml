apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "logfowd.fullname" . }}-config
  labels:
    {{- include "logfowd.labels" . | nindent 4 }}
data:
  config.json: |
    {
      "env": "{{ .Values.app.env }}",
      "debug_mode": {{ .Values.app.debug_mode }},
      "elasticsearch": {
        "host": "{{ .Values.app.elasticsearch.host }}",
        "port": "{{ .Values.app.elasticsearch.port }}",
        "index_name": "{{ .Values.app.elasticsearch.index_name }}",
        "flush_interval": {{ .Values.app.elasticsearch.flush_interval }},
        "workers": {{ .Values.app.elasticsearch.workers }},
        "api_prefix": "{{ .Values.app.elasticsearch.api_prefix }}",
        "use_auth": {{ .Values.app.elasticsearch.use_auth }},
        "username": "{{ .Values.app.elasticsearch.username }}",
        "password": "{{ .Values.app.elasticsearch.password }}"
      },
      "logs_path": {{ .Values.app.logs_path | toJson }}
    }